@{
    ViewBag.Title = "StudentPortal";
    Layout = null;
}
<link href="~/Content/WebsiteCss/css/fontawesome/font-awesome.min.css" rel="stylesheet" />
<link href="~/Content/DatePicker2/css/jquery.datepick.css" rel="stylesheet" />
<div class="preloader-area">
    <div class="sk-cube-grid">
        <div class="sk-cube sk-cube1"></div>
        <div class="sk-cube sk-cube2"></div>
        <div class="sk-cube sk-cube3"></div>
        <div class="sk-cube sk-cube4"></div>
        <div class="sk-cube sk-cube5"></div>
        <div class="sk-cube sk-cube6"></div>
        <div class="sk-cube sk-cube7"></div>
        <div class="sk-cube sk-cube8"></div>
        <div class="sk-cube sk-cube9"></div>
    </div>
</div>

<div class="container-fluid">
    <div class="navbar navbar-fixed-top navbar-default org-titlebar">
        <div class="container">
            <h3 style="padding-left:150px">
                Carmel Teresa
                <small style="font-size:60%">Registration Portal</small>
                <span class="pull-right" style="float:right; padding-right:150px">Hi Guest!</span>
            </h3>
        </div>
    </div>


    <div>
        <div class="ui-card">
            <div class="ui-card-body">
                <div class="ui-card-content">
                    <div class="container" style="margin-top:1px;">
                        <div style="box-sizing:border-box">
                            <form style="box-sizing:border-box" class="form-control" action="AddAdmissionDetails" enctype="multipart/form-data" method="post" id="RegisterForm">
                                <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin:10px 0px">
                                    <div class="ui-grid-row" style="display:flex; margin-right: 470px;">
                                        <div class="ui-grid-col-6" style="text-align:right">
                                            Enter Application Number *:
                                        </div>
                                        <div class="ui-grid-col-6 form-group">
                                            <div>
                                                <input type="text" class="form-control" placeholder="Application Number" style="width:450px; height:35px; border: 1px solid #a80000;" id="StudentApplicationNumber" name="Parents_Email" required />
                                                <span class="ui-inputgroup-addon"><i class="fa fa-envelope"></i></span>
                                            </div>
                                        </div>

                                    </div>


                                    <div class="ui-grid-row">
                                        <div class="ui-grid-col-4">
                                        </div>
                                        <div class="ui-grid-col-8" style="margin-left:526px;">
                                            <div>
                                                <button type="button" class="ui-button-success" style="width:480px; height:35px;" id="BtnSaveApplication">
                                                    Submit
                                                    @*<a href="/Student/AddStudent" >Start Filling Your Application</a>*@
                                                </button>
                                            </div>
                                        </div>
                                        @*<div class="ui-grid-col-3">

                                            </div>*@
                                    </div>
                                </div>





                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </div>


    </div>
</div>
<div class="ui-card">
    <div class="ui-card-body">
        <div class="ui-card-content">
            <div class="container" style="margin-top:1px;">
                <div style="box-sizing:border-box">
                    <form style="box-sizing:border-box" class="form-control" enctype="multipart/form-data" method="post">
                        <h2 style="text-align:center">Student Details</h2>
                        <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin:10px 0px">
                            <div class="ui-grid-row" style="display:flex; margin-right: 470px;">
                                <div class="ui-grid-col-6" style="text-align:right">
                                    <div class="form-group">
                                        <input type="hidden" id="studentid" />
                                    </div>
                                    <div class="form-group">
                                        <input type="hidden" id="Application_Number" />
                                    </div>
                                    <div class="form-group">
                                        <label>Student Name:</label>
                                        <input type="text" class="form-control" id="Studentname" />
                                    </div>
                                    <br />
                                    <div class="form-group">
                                        <label>Email:</label>
                                        <input type="text" class="form-control" id="email" />
                                    </div>
                                    <br />
                                    <div class="form-group">
                                        <label>Father Name</label>
                                        <input type="text" class="form-control" id="fathername" />
                                    </div>
                                    <br />
                                    <div class="form-control">
                                        <label>Mother Name</label>
                                        <input type="text" class="form-control" id="mothername" />
                                    </div>
                                </div>
                                <div class="ui-grid-col-6" style="text-align:right">
                                    <div>
                                        @*<input type="text" class="form-control" placeholder="Application Number" style="width:450px; height:35px; border: 1px solid #a80000;" id="StudentApplicationNumber" name="Parents_Email" required />
                                            <span class="ui-inputgroup-addon"><i class="fa fa-envelope"></i></span>*@
                                        <div class="form-group">
                                            <label>Class:</label>
                                            <input type="text" class="form-control" id="classname" />
                                        </div>
                                        <br />
                                        <div class="form-group">
                                            <label>Contact No:</label>
                                            <input type="text" class="form-control" id="Contactno" />
                                        </div>
                                        <br />
                                        <div class="form-control">
                                            <label>Address:</label>
                                            <input type="text" class="form-control" id="addressname" />
                                        </div>
                                        <br />
                                        <div class="form-control">
                                            <label>Registration Fee:</label>
                                            <input type="text" class="form-control" id="Registration Fee" />
                                        </div>
                                    </div>
                                </div>

                            </div>


                            <div class="ui-grid-row">
                                <div class="ui-grid-col-4">
                                </div>
                                <div class="ui-grid-col-8" style="margin-left:600px">
                                    <div>
                                        <button type="button" class="ui-button-success" style="width:100px; height:35px;" id="BtnPayFee">
                                            Pay
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </div>





                    </form>
                </div>

            </div>
        </div>
    </div>
</div>


@*<h2>AdmissionPortal</h2>*@
<script src="~/Scripts/WebsiteJs/js/jquery.js"></script>
@*<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>*@

<script src="~/Content/DatePicker2/js/jquery.plugin.min.js"></script>

<script src="~/Content/DatePicker2/js/jquery.datepick.js"></script>
<script>
    $('.datepicker').datepick({ dateFormat: 'dd/mm/yyyy' });


</script>
<script>
    $("#BtnSaveApplication").on('click', function () {
        //
        var studentid = $("#StudentApplicationNumber").val();
        //alert(studentid);
        if (studentid == "" || studentid == null) {
            alert("Please Enter Admission Number");
        }
        else
        {
            $.ajax({
                url:"/Payment/GetAdmissionNoById?appnumber=" + studentid,
                //data: JSON.stringify(studentid),
                type: "GET",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (result) {
                    //alert(result.feedetails.FeeValue);
                    if()
                    if (result != null) {
                        $("#studentid").val(result.data.StudentId);
                        $("#Studentname").val(result.data.Name);
                        $("#email").val(result.data.ParentEmail);
                        //$("#fathername").val(result.);
                        //$("#mothername").val(result.);
                        $("#classname").val(result.data.Class);
                        //$("#categoryname").val(result.data.Category);
                        $("#admissionfee").val(result.feedetails.FeeValue);

                    }
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });
        }

    });


    $("#BtnPayFee").on('click', function () {
        //
        var feeReceiptViewModel = {}
        var FeeHeadings = [];
        var FeeHeadingAmt = [];
        var Selectedmonths = [];
        var collectFees = [];
        var _cource = "";
        var _CourseSpecialization = "";
        var _Class = "";
        var _Category = "";
        var _Name = "";
        var _Batch = "";
        alert($('#admissionfee').val());
        //
        //feeReceiptViewModel.StudentId = $('#studentid').val();// $("#StudentName option:selected").val();
        //feeReceiptViewModel.CourseSpecialization = _CourseSpecialization;
        feeReceiptViewModel.ClassName = $('#classname').val();
        //feeReceiptViewModel.CategoryName = $('#categoryname').val();
        feeReceiptViewModel.StudentName = $('#Studentname').val();
        //feeReceiptViewModel.BatchName = _Batch;

        feeReceiptViewModel.DueAmountYesNo = "no";
        feeReceiptViewModel.FeeHeadings = "Admission Fee";
        feeReceiptViewModel.FeeHeadingAmt = $("#admissionfee").val();
        feeReceiptViewModel.collectFees = $("#admissionfee").val();
        feeReceiptViewModel.TotalFee = $("#admissionfee").val();
        feeReceiptViewModel.OldBalance = 0;
        feeReceiptViewModel.LateFee = 0;
        feeReceiptViewModel.Concession = 0;
        feeReceiptViewModel.ConcessionAmt = 0;
        feeReceiptViewModel.NetFee = $("#admissionfee").val();
        feeReceiptViewModel.ReceiptAmt = $("#admissionfee").val();
        feeReceiptViewModel.BalanceAmt = 0;
        feeReceiptViewModel.PaymentMode = "Online";
        feeReceiptViewModel.BankName = "";
        feeReceiptViewModel.CheckId = "";
        feeReceiptViewModel.Remark = "";
        feeReceiptViewModel.Course = _cource;
        feeReceiptViewModel.ApplicationNumber = $("#StudentApplicationNumber").val();
        $.ajax({
            url: "/Fee/AmountTransferGateway?isStudent=false",
            //  url: '/Fee/AddFeeReceipt1',
            dataType: "json",
            type: "POST",
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(feeReceiptViewModel),
            async: true,
            processData: false,
            cache: false,
            success: function (data) {
                //alert("Fee Saved Successfully.")
                //window.location.reload();
                //return Json(new { result = "Redirect", url = Url.Action("StudnetPaymentSummary", "FeeConfiguration") });
                window.location.href = '@Url.Action("RegistrationFeePaymentProcess", "Payment")';
            },
            error: function (xhr) {
                // window.location.reload();
                if (xhr.getResponseHeader("X-Responded-JSON") != null
                    && JSON.parse(xhr.getResponseHeader("X-Responded-JSON")).status == "401") {
                    //some message here
                    return;
                }
            }
        });
    });


</script>
