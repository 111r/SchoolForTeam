
@{
    ViewBag.Title = "SalaryStatement";
}

<div class="right_col" role="main">
    <div class="row">
        <div class="col-sm-12">
            <form action="/Master/AddBasicPay" method="post" id="Basicpayform">
                <div class="col-sm-12" style="border-right:1px solid #eee;">
                    @*<div class="form-group">
                            <input type="hidden" id="BasicAmount_Id" name="BasicAmount_Id" />
                        </div>*@
                    @*<div class="col-sm-3">



                            <div class="form-group">
                                <label>Account Details</label>
                                <select class="form-control" id="Account_Id">
                                    <option value="0">---Select---</option>
                                    @foreach (var item in ViewBag.AccountType as IEnumerable<SchoolManagement.Data.Models.Tbl_DataListItem>)
                                    {
                                        <option value="@item.DataListItemId">@item.DataListItemName</option>
                                    }
                                </select>
                            </div>

                        </div>*@
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Date</label>
                            <input type="text" id="Date" readonly class="form-control datepicker" />
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group" style="margin-top:20px">

                            <button type="button" id="BtnFilter" class="btn btn-success">Filter</button>
                        </div>
                    </div>
                    @*<div class="col-sm-3">
                            <div class="form-group" style="margin-top:20px">
                                <button type="button" id="ExcelDownload" class="btn btn-info">Download</button>
                            </div>
                        </div>*@

                </div>
            </form>
            <hr />
            <div id="PrintTable">
                <div id="AppendSalaryData" class="col-sm-12">

                </div>
                <div>
                    <h2 style="text-align:right;margin-top:20px">Approved By</h2>
                </div>
            </div>

            <div class="form-group" style="text-align:right;margin-top:10px">
                <button type="button" id="BtnPrint" class="btn btn-success">Print</button>
            </div>

        </div>
    </div>
</div>



<script src="~/Scripts/printThis.js"></script>

<script>
    //$("#TblSalaryStatement").DataTable();


    $("#BtnPrint").on('click', function () {
        var date = $("#Date").val();
        //$("#TblSalaryStatement").DataTable().destroy();
        //window.location.href = "/Staf/PrintSalaryStatement?date=" + date;
        $("#PrintTable").printThis();
    });

    $("#BtnFilter").on('click', function () {
        //var account_Id = $("#Account_Id").val();
        //alert(account_Id);
        var Date = $("#Date").val();

        if (Date == "") {
            alert("Please Select  Date");
        }
        else {
            var html = "";
            var html1 = "";
            $.ajax({
                url: "/Account/FilterAccount",
                data: { Date: Date },
                type: "GET",
                dataType: "json",
                contentType: "application/json;charset=UTF-8",
                success: function (result) {
                    //alert(result.count);
                    if (result != null || result != "") {
                        $("#AppendSalaryData").empty();
                        $("#AppendSalaryData").append(result);

                    } else {
                        alert("No Record");
                        window.location.reload();
                    }
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });

        }

    });


    $("#ExcelDownload").on('click', function () {
        var account_Id = $("#Account_Id").val();
        alert(account_Id);
        var Date = $("#Date").val();

        if (account_Id == 0 || Date == "") {
            alert("Please select Date and Management");
        }
        else {
            window.location.href = "/Account/ExportSalaryStatement?date=" + Date + "&accountid=" + account_Id;
        }

    });

</script>